<%@page import="ccnu.entity.Movie"%>
<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ page language="java" import="ccnu.controller.MovieController"%>
<%@ page language="java" import="org.apache.lucene.search.Hits"%>
<%@ page language="java" import="org.apache.lucene.document.Document"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="content-language" content="zh-CN" />  
	<title>æœç´¢å¼•æ“æ£€ç´¢ç»“æœ</title>
	<base href="<%=basePath%>"/>
	<meta name="Keywords" content="ç”µå½±å½±è¯„,çˆ¬è™«"/>
	<meta name="Description" content="ç”µå½±å½±è¯„,çˆ¬è™«"/>
	
	<style type="text/css">
		*{
			margin: 0 auto;
			padding: 0 auto;
			text-align: center;
		}
		
		a{
			text-decoration: none;
			color: #3385FF;
			font-size: 20px;
		}
		
		#nav{
			height: 100px;
			font-size: 40px;
			color: #3385FF;
			position: absolute;
			float: left;
			padding: 10px 0 0 40px;
			text-align: right;
		}
		.nav1{
			position: absolute;
			margin: 10px 0 0 120px;
		}
		.nav2{
			width: 1600px;
			height: 2px;
			background-color: #B6B6B6;
			margin: 10px 0 0 120px;
		}
		
		#title{
			width: 100%;
			height: 60px;
			background-color:  #3385ff;
			font-size: 30px;
			color: white;
			line-height: 60px;
		}
		
		#tableResult{
			margin: 100px auto;
		}
		table.altrowstable {
			width: 1500px;
			font-family: verdana,arial,sans-serif;
			font-size:25px;
			color:#333333;
			border-width: 1px;
			border-color: #a9c6c9;
			border-collapse: collapse;
		}
		table.altrowstable th {
			border-width: 1px;
			padding: 8px;
			border-style: solid;
			border-color: #B6B6B6;
			color: white;
			background-color: #3385FF;
		}
		table.altrowstable td {
			border-width: 1px;
			padding: 8px;
			border-style: solid;
			border-color: #a9c6c9;
		}
		.oddrowcolor{
			background-color:#FFFFFF;
		}
		.evenrowcolor{
			background-color:#E0E0E0;
		}
	</style>
	
	<script type="text/javascript">
		function altRows(id){
			if(document.getElementsByTagName){  
				
				var table = document.getElementById(id);  
				var rows = table.getElementsByTagName("tr"); 
				 
				for(i = 0; i < rows.length; i++){          
					if(i % 2 == 0){
						rows[i].className = "evenrowcolor";
					}else{
						rows[i].className = "oddrowcolor";
					}      
				}
			}
		}

		window.onload=function(){
			altRows('alternatecolor');
		}
	</script>
</head>
<body>
	<div id="title">
		<div>ç”µå½±å½±è¯„æ£€ç´¢ç³»ç»Ÿ</div>
	</div>
	
	<div id="nav">
		<div class="nav1">æ£€ç´¢ç»“æœ</div>
		<a href="index.jsp">è¿”å›é¦–é¡µ</a>
		<div class="nav2"/>
	</div>
	
	<%
		String flag = (String) request.getAttribute("flag");
		List<Movie> movieList = (ArrayList<Movie>)request.getAttribute("movieList");
	%>
	<%
		if (flag.equals("simpleSearch")) {
	%>
	
	<span style="color: DarkBlue;color:red;">æ£€ç´¢è¯:
	<%
	 	String word = (String) request.getAttribute("txt");
	 		out.println(word);
	%> <br />
	<%			
		out.println("ä¸ºæ‚¨æ‰¾åˆ°"+movieList.size()+"æ¡ç›¸å…³ä¿¡æ¯");
	%>
	</span>
	</div>
	<%
		} else if (flag.equals("juniorSearch")) {
	%>
		<div style="font-size:15px;background-image:url(2.png);border:5px solid BurlyWood;position:fixed;z-index:2;top:0;width:1282px;heigth:100px">
		<span style="color: red;">é«˜çº§æ£€ç´¢æŸ¥è¯¢ç»“æœæ˜¾ç¤º:</span>
 	<%			
 			
 			out.println("ä¸ºæ‚¨æ‰¾åˆ°"+movieList.size()+"æ¡ç›¸å…³ä¿¡æ¯");
		}
	%>
		</span>
	</div>
	
	<%-- <div style="position:absolute;top:500px;z-index:1;">
		<ul style="color:gray;">
			<%
				Hits hits = (Hits) request.getAttribute("hits");
				Document doc = null;
				for (int i = 0; i < hits.length(); i++) {
					doc = hits.doc(i);
					String title = doc.get("title");
							
			%>
			<%
					out.println( doc.get("author") + "    å‘è¡¨æ—¶é—´:" + doc.get("date"));
			%>
			<br><span><strong>ğŸš¶--->â˜€ï¸--->ğŸŒ¤--->â›…--->ï¸ğŸŒ¥--->ğŸŒ¦--->ğŸŒ§--->â›ˆ--->ğŸŒ©--->ğŸŒ¨====================================(ã¥ â—â”€â— )ã¥</strong></span>
			<%
				}
			%>
		</ul>
	 </div> --%>
	
	<div id="tableResult">
		<table class="altrowstable" id="alternatecolor">
			<tr>
				<th>#</th>
				<th>æ ‡é¢˜å</th>
				<th>ä½œè€…</th>
				<th>æ—¶é—´</th>
				<th>å¥½è¯„</th>
				<th>å·®è¯„</th>
				<th style="width: 100x;">çŠ¶æ€</th>
			</tr>
			
			<c:forEach items="${movieList}" var="movie">  
		        <tr>  
	             	<td>1</td>
					<td>${movie.title}</td>
					<td>${movie.author}</td>
					<td>${movie.date}</td>
					<td>${movie.up}</td>
					<td>${movie.date}</td>
					<td>
						<a href="${movie.url}">æŸ¥çœ‹</a>
						<!-- <a>åˆ é™¤</a> -->
					</td>
		         </tr>  
			</c:forEach>  
			
		</table>
	</div>
</body>
</html>